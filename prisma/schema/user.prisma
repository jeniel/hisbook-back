model User {
  id                 String   @id @default(uuid())
  /// @Validator.@IsEmail()
  email              String   @unique
  username           String   @unique
  /// @HideField()
  hashedPassword     String   @map("hashed_password")
  hashedRefreshToken String?  @map("hashed_refresh_token")
  role               Role[]   @default([USER])
  isActive           Boolean  @default(true) @map("is_active")
  isApprove          Boolean  @default(false) @map("is_approve")
  createdAt          DateTime @default(now()) @map("created_at") @db.Date
  createdBy          String?  @map("created_by")
  updatedAt          DateTime @default(now()) @updatedAt @map("updated_at") @db.Date
  updatedBy          String?  @map("updated_by")
  tenantId           String?
  profile            Profile?
  tenant             Tenant?  @relation(fields: [tenantId], references: [id])

  @@map("user")
  @@schema("global")
}

model Profile {
  id           String      @id @default(uuid())
  firstName    String?     @map("first_name")
  middleName   String?     @map("middle_name")
  lastName     String?     @map("last_name")
  designation  String?
  employeeID   Int?        @default(autoincrement()) @map("employee_id")
  dateHired    DateTime?   @map("date_hired")
  birthDate    DateTime?   @map("birth_date")
  address      Json?
  contact      Json?
  departmentId String?     @map("department_id")
  userId       String?     @unique @map("user_id")
  createdAt    DateTime    @default(now()) @map("created_at") @db.Date
  createdBy    String?     @map("created_by")
  updatedAt    DateTime    @default(now()) @updatedAt @map("updated_at") @db.Date
  updatedBy    String?     @map("updated_by")
  department   Department? @relation(fields: [departmentId], references: [id])
  user         User?       @relation(fields: [userId], references: [id])

  @@map("profile")
  @@schema("global")
}

model Tenant {
  id                String          @id @default(uuid())
  name              String
  description       String?
  isActive          Boolean         @default(true) @map("is_active")
  isApprove         Boolean         @default(false) @map("is_approve")
  createdAt         DateTime        @default(now()) @map("created_at") @db.Date
  updatedAt         DateTime        @default(now()) @updatedAt @map("updated_at") @db.Date
  nanoid            String          @unique @default(nanoid(8))
  slug              String          @unique
  chatTableName     String?         @map("chat_table_name")
  documentTableName String?         @map("document_table_name")
  collectionName    String?         @map("collection_name")
  size              Int?
  distance          DistanceMetric  @default(Cosine)
  keywordDailies    keyword_daily[]
  keywords          keywords[]
  users             User[]

  @@map("tenant")
  @@schema("global")
}

enum DistanceMetric {
  Cosine
  Euclid
  Dot

  @@schema("global")
}

model Department {
  id          String    @id @default(uuid())
  name        String
  description String?
  profile     Profile[]

  @@map("department")
  @@schema("global")
}

enum Role {
  USER
  ADMIN
  CLIENT
  SUPER_ADMIN
  CLIENT_USER
  CLIENT_ADMIN
  AL_USER

  @@schema("global")
}
